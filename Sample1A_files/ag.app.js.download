/*! updated; 04-11-2018 04:09 PM **/


Modulr.define("core.pages.articles:config",["require","jquery","cdn"],function(require,$){var config={};return config.cdn=require("cdn"),config});
Modulr.define("core.pages.articles:helper",["require","jquery","modernizr","cdn","core.base:utils/detector","akamai.time","akamai.geo","core.plugins:ImageLazyLoad"],function(require,$){var Time=require("akamai.time"),Geo=require("akamai.geo"),CDN=(require("modernizr"),require("cdn")),Detector=require("core.base:utils/detector"),Unveil=require("core.plugins:ImageLazyLoad"),Helper=function(){};return Helper.prototype.getCurrentView=Detector.current,Helper.prototype.getCurrentTime=function(){return Time.getCurrent()},Helper.prototype.cssStickySupported=function(){var element=document.createElement("div"),styling=element.style;return styling.cssText="position:-webkit-sticky;position:-moz-sticky;position:-ms-sticky;position:-o-sticky;position:sticky;",-1!==styling.position.indexOf("sticky")},Helper.prototype.log=function(){if(window.console){var args=Array.prototype.slice.call(arguments);args.unshift("[FOX.ARTICLES] ");try{return console.log.apply(console,args)}catch(err){console.log(args.join(" | "))}}},Helper.prototype.setLoader=function(items){for(var i=0;i<items.length;i++)!function(info){var target=info.target,clear=CDN.domain+"/static/orion/img/clear.gif",className="loader-"+info.module.replace(/[^A-Za-z0-9\-\_]/gi,"").toLowerCase();target.append('<img class="'+className+'" data-src="'+clear+'" src="'+clear+'" style="width: 1px; height: 1px;" />'),Unveil(target.find("img."+className+":first"),50,function(){require([info.module],function(mod){Helper.log("loaded module: "+info.module),"function"==typeof info.callback?info.callback():"object"==typeof mod&&"function"==typeof mod.init&&mod.init()}),$(this).remove()})}(items[i])},Helper.prototype.getSiteId=function(){return $('meta[name="prism.channel"]').attr("content")||"fnc"},Helper.prototype.isListPage=function(){return"list"===$('meta[name="prism.genre"]').attr("content")},Helper.prototype.execModules=function(modules){for(var i=0;i<modules.length;i++){var module=modules[i];"object"==typeof module&&"function"==typeof module.init&&module.init()}},Helper.prototype.getHeight=function(width){return 9*Math.round(width/16)},Helper.prototype.setModulePaths=function(prefix,arr){for(var i=0;i<arr.length;i++)arr[i]=[prefix,arr[i]].join("/").replace(/\/+/g,"/");return arr},Helper.prototype.isElementInViewport=function(el){var rect=el.get(0).getBoundingClientRect();return rect.top>=0&&rect.left>=0&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)},Helper.prototype.cacheBuster=function(freq){freq=freq||!1;var date=new Date,str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString(),hr=date.getHours()+1,min=date.getMinutes();return str+=hr.toString()+(freq&&!isNaN(freq)?Math.floor(min/parseFloat(freq)).toString():"")},Helper.prototype.isFoxBusiness=function(){return"fbn"===$('meta[name="prism.channel"]').attr("content")},Helper.prototype.isAEMAuthor=function(){return!!/aem\-(|.+)author/.test(window.location.host)},Helper.prototype.geoInfo=function(){return Geo},Helper.prototype.getDomainHost=function(useProtocol,prod){var loc=window.location,host=loc.hostname,protocol=loc.protocol,arr=host.split("."),val=[];return useProtocol&&(val.push(protocol+"//"),!prod)?protocol+"//"+host:(host.indexOf("smallbusiness.")>-1?val.push("smallbusiness."):prod&&val.push("www."),val.join("")+arr[arr.length-2]+"."+arr[arr.length-1])},Helper.prototype.IEVersion=function(version,comparison){var isIE,cc="IE",b=document.createElement("B"),docElem=document.documentElement;return version&&(cc+=" "+version,comparison&&(cc=comparison+" "+cc)),b.innerHTML="\x3c!--[if "+cc+']><b id="iecctest"></b><![endif]--\x3e',docElem.appendChild(b),isIE=!!document.getElementById("iecctest"),docElem.removeChild(b),isIE},Helper.prototype.getArticleBody=function(){var el=$("article div[itemprop='articleBody']");return 0===el.length&&(el=$("article .article-body")),el},new Helper});
Modulr.define("core.pages.articles:main",["require","jquery","helper","sites/router","core.components:auth"],function(require,$,Helper){var Router=require("sites/router");require("core.components:auth").initNew();var MODULES_INIT=["@shared/bigtop.video","@shared/video.modal","@shared/outbrain","@shared/video.providers","@shared/video.embed","core.base:modules/header","core.base:modules/breaking-news"],App=function(){var Proto=this;Router.ready(),Proto.set=function(callback){Router.ready(callback)}};return MODULES_INIT.length>0&&require(MODULES_INIT,function(){var args=Array.prototype.slice.call(arguments);Helper.execModules(args)}),new App});
Modulr.define("core.pages.articles:models/data",["require","jquery"],function(require,$){return new function(){this.getData=function(){return"sample data"}}});
Modulr.define("core.pages.articles:shared/modules/bigtop.video",["require","jquery","helper","lodash","core.video:api","core.plugins:OnWindowResize","@shared/viewable.video"],function(require,$,Helper,_,Video){var OnWindowResize=require("core.plugins:OnWindowResize"),featured_vid=$("main article .article-body .featured-video:first"),target=featured_vid.find("div.m"),articleEl=target.closest("article"),view=Helper.getCurrentView();return new function(){var Proto=this,VideoInstance=null,INIT=!0;Proto.init=function(){target.find("a").removeClass("hide"),"mobile"===view?featured_vid.on("click",function(evt){evt.preventDefault(),Proto.render()}):featured_vid.length>0&&Proto.render()},Proto.render=function(){if(0===target.length)return!1;var caption=featured_vid.find(".caption"),properties={app:{rules:["heartbeat","autoAdvance","playername:inpage"]}};if("mobile"===view&&_.merge(properties,{player:{autoplay:!0,flash:{vars:{user_controlled_autoplay:!0,auto_play_override:!0}}}}),VideoInstance=Video.embed(target,properties),VideoInstance.on("amp.advance",function(data){return INIT=!1}),VideoInstance.on("amp.mediachange",function(data){if(data&&!INIT){var title=data.amp&&data.amp.title?data.amp.title:"&nbsp;",link=data.amp&&data.amp.link?data.amp.link:"#";caption.find(".title a").text(title).attr("href",link),caption.find("p").text("")}}),articleEl.hasClass("is-video")&&articleEl.addClass("has-video"),VideoInstance&&"desktop"===view&&!Helper.isAEMAuthor()){new(require("@shared/viewable.video"))(VideoInstance).init()}},OnWindowResize(function(){view=Helper.getCurrentView()})}});
Modulr.define("core.pages.articles:shared/modules/metarow",["require","jquery","lodash","helper","core.plugins:DateTime"],function(require,$,_){var Helper=require("helper"),DateTime=require("core.plugins:DateTime");return new function(){var CONFIG={container_selector:".article-meta-upper time",attribute_name:"data-time-published",attribute_formatted:"timePublished",auto_update:!1,update_interval_in_min:1},components=[],timer=!1,now=Helper.getCurrentTime(),Proto=this;Proto.collector=function(){components.length=0;var elements=$(CONFIG.container_selector+"["+CONFIG.attribute_name+"]");_.forEach(elements,function(item){var attr,element=$(item);if(attr=element.data(CONFIG.attribute_formatted)){var timediff=attr.substr(attr.indexOf("Z-0")+3,1),timeWithoutTZ=new Date(attr.substr(0,attr.length-5)),then=new Date(timeWithoutTZ.getTime()+60*timediff*60*1e3);components.push({element:element,then:then,delta:now-then,diff:{},label:""})}})},Proto.calculator=function(increment){_.forEach(components,function(item){var formattedText="",previousText=item.label;increment&&(item.delta+=increment);var delta=item.delta;if(item.diff={seconds:Math.floor(delta/1e3),mins:Math.floor(delta/6e4),hours:Math.floor(delta/36e5),days:Math.floor(delta/864e5)},item.diff.days>6){formattedText=DateTime(item.then,"${month} ${ddTH}");var yearThen=item.then.getFullYear();yearThen!==now.getFullYear()&&(formattedText+=", "+yearThen),item.label=formattedText}else formattedText=function(label){return[item.diff[label],item.diff[label]>1?label:label.substr(0,label.length-1),"ago"].join(" ")},item.diff.hours>23?item.label=formattedText("days"):item.diff.mins>59?item.label=formattedText("hours"):item.diff.seconds>59?item.label=formattedText("mins"):item.label="just in";var rawTime={alert:!1,item:item,label:item.label};previousText!==item.label&&item.element.html(item.label),item.element.data("rawTimestamp",rawTime),item.element.trigger("evt.rawTimestamp",rawTime)})},Proto.init=function(){Proto.trigger({auto_update:"true"})},Proto.trigger=function(configuration){if(configuration&&(CONFIG=_.merge(CONFIG,configuration)),Proto.collector(),Proto.calculator(),CONFIG.auto_update){var updateInterval=6e4*CONFIG.update_interval_in_min;timer=setInterval(function(){Proto.calculator(updateInterval)},updateInterval)}}}});
Modulr.define("core.pages.articles:shared/modules/multi.featured.image",["require","jquery","helper","core.plugins:OnWindowResize","core.plugins:TouchEventListener"],function(require,$){var OnWindowResize=require("core.plugins:OnWindowResize"),Touch=require("core.plugins:TouchEventListener");return new function(){Proto=this;var scrollingTimer,images={},controls={},captions={},slideWidth=0,fullWidth=0;Proto.init=function(){return!1},Proto.set=function(holder){var content=$(".featured-image .content");if(!(content.length<1)){var ul=holder.find("ul.slide-container"),items=ul.find("li"),control=holder.find(".ctrl"),info=content.find(".info");images={holder:holder,ul:ul,items:items,size:items.length},controls={main:control,prev:control.find("> .prev"),next:control.find("> .next")},captions={info:info,pager:info.find(".pager"),caption:info.find(".caption")},1===images.size?Proto.setControls(controls.next,!1):Proto.setControls(controls.next,!0),Proto.bindEvents()}},Proto.bindEvents=function(){var swipeDir,left_pos,img_active=images.ul.find(".active"),i=img_active.index();new Touch(images.items).on("swipe",function(a){swipeDir=a.direction[0]}),images.holder.on("touchend",function(){scrollingTimer=setInterval(function(){left_pos===images.ul.position().left?(Proto.swipe(images.holder.scrollLeft(),swipeDir),clearInterval(scrollingTimer)):left_pos=images.ul.position().left},100)}),controls.main.on("click",function(evt){evt.preventDefault();var dir=$(evt.target).hasClass("next")?"next":"prev";img_active=images.ul.find(".active"),i=img_active.index();var text="next"===dir?i+1:i-1;Proto.fadeTextOut(i,dir,function(){Proto.fadeTextIn(text)}),Proto.slide(dir,img_active),"next"===dir?Proto.setControls(controls.prev,!0):Proto.setControls(controls.next,!0)})},Proto.swipe=function(distance,dir){var active_item,full_width=images.ul.width(),item_width=full_width/images.size,swipe_width=item_width-Math.floor(item_width/2);active_item=distance<swipe_width?0:distance>=swipe_width&&distance<item_width+swipe_width?1:2,images.items.each(function(){$(this).removeClass("active")});var elem=images.ul.find("li:eq("+active_item+")");elem.addClass("active"),images.holder.scrollLeft(elem.position().left),captions.caption.find("p").each(function(){$(this).removeClass("show").addClass("hide")}),captions.caption.find("[data-attr='"+active_item+"']").removeClass("hide").addClass("show"),Proto.setPager(active_item+1)},Proto.fadeTextOut=function(index,dir,callback){var text=captions.caption.find("[data-attr='"+index+"']"),pager=captions.pager,adv_index="next"===dir?index+2:index;text.length>0?(pager.fadeOut("500"),text.fadeOut("500",function(){Proto.setPager(adv_index),"function"==typeof callback&&callback()})):pager.fadeOut("500",function(){Proto.setPager(adv_index),"function"==typeof callback&&callback()})},Proto.fadeTextIn=function(index){var text=captions.caption.find("[data-attr='"+index+"']"),pager=captions.pager;text.length>0&&text.fadeIn("slow"),pager.fadeIn("slow")},Proto.slide=function(type,active){var new_active="next"===type?active.next():active.prev(),new_index=new_active.index();slideWidth="next"===type?slideWidth+active.width():slideWidth-active.width(),images.ul.animate({left:-1*slideWidth},"slow"),active.removeClass("active"),new_active.addClass("active"),0===new_index&&Proto.setControls(controls.prev,!1),new_index+1===images.items.length&&Proto.setControls(controls.next,!1)},Proto.setPager=function(new_i){captions.pager.find("span").text(new_i)},Proto.setControls=function(elm,state){state?elm.removeClass("hide").addClass("show"):elm.addClass("hide").removeClass("show")},Proto.getView=function(){var width=$(window).width();return width>=1024?"desktop":width>767&&width<1024?"tablet":"mobile"},Proto.setSize=function(){images.items.width($(".featured-image").width()),images.ul.width($(".featured-image").width()*images.size),images.items.each(function(){fullWidth+=$(this).width()})},OnWindowResize(function(){Proto.setSize()},500)}});
Modulr.define("core.pages.articles:shared/modules/outbrain",["require","jquery","lodash","helper","core.plugins:OutbrainWidgetConnector"],function(require,$,_,Helper){var Connector=require("core.plugins:OutbrainWidgetConnector"),log=Helper.log,INITIALIZED=!1,USE_URL=null,GEO_INFO=Helper.geoInfo(),GEO_TARGET_REPLACEMENT={GB:{AR_14:"HOP_21"}},OVERLAY_DIM={AR_10:32,AR_14:32},OB_TEMPLATE=function(){var res="foxnews";return/foxbusiness\.com/.test(window.location.host)&&(res="foxbusiness"),res}();return new function(){function geoTargetId(id){if(Helper.isAEMAuthor()){var code=GEO_INFO.countryCode,data=GEO_TARGET_REPLACEMENT[code]||null;data&&data[id]&&(id=data[id])}return id}function getPermalink(callback){var loc=window.location,domain=Helper.getDomainHost(!0,!0),permalink=$('meta[property="og\\:url"]:first').attr("content")||[loc.protocol,"//",loc.host||loc.hostname,loc.pathname].join("");if(Helper.isAEMAuthor()){var channel="politics";if(window.OBCB_politics)LoadAttempt(50,250,function(){return!!USE_URL[channel]},function(){callback(USE_URL[channel])});else{window.OBCB_politics=function(data){var useUrl=permalink;if(data&&data.response&&$.isArray(data.response.docs)&&data.response.docs.length>0)for(var docs=data.response.docs,x=0;x<docs.length;x++){var url=!!$.isArray(docs[x].url)&&docs[x].url[0],ch=!("string"!=typeof url||!url.split("/")[3])&&url.split("/")[3];if(ch===channel){useUrl=url;break}}useUrl&&!USE_URL[channel]&&(USE_URL[channel]=useUrl),callback(useUrl)};var url=domain+"/feeds/trending/"+channel+"/feed/json?callback=OBCB_politics";$.ajax({url:url,dataType:"script",cache:!0,async:!0})}}else callback(permalink)}var Proto=this,Outbrain=new Connector;Proto.init=function(){if(!INITIALIZED){INITIALIZED=!0;var target=$(".OUTBRAIN[data-widget-id], .vendor-unit.vendor-outbrain > div[data-widget-id]").filter(function(){var el=$(this),res=!0;return el.is(":visible")||(el.remove(),res=!1),res});0!==target.length&&getPermalink(function(permalink){Proto.set(target,permalink)})}},Proto.set=function(target,permalink){function eachItem(elm){var widgetId=elm.attr("data-widget-id")||null;return widgetId?($('link[rel="canonical"]').attr("href")||"").indexOf("politics/2018/03/22/chappaquiddick-kennedy-cover-up.html")>-1&&"AR_22"===widgetId?(elm.remove(),null):(widgetId=geoTargetId(widgetId),idArr.push(widgetId),{addWidgetType:"data-widget",widgetId:widgetId,permalink:permalink,Template:OB_TEMPLATE,overlayDim:OVERLAY_DIM[widgetId]||!1,langJS:"//widgets.outbrain.com/lang_en.js"}):null}var config=[],idArr=[];target.each(function(){$(this).addClass("OUTBRAIN");var item=eachItem($(this));item&&config.push(item)}),config.length>0&&(log("Outbrain Widgets Loaded: "+idArr.join(",")),Outbrain.addWidget(config))}}});
Modulr.define("core.pages.articles:shared/modules/sample",["require","jquery","helper"],function(require,$,Helper){return console.log("example!"),new function(){this.init=function(){console.log("initialization method")}}});
Modulr.define("core.pages.articles:shared/modules/video.embed",["require","jquery","helper","core.video:api","core.plugins:OnWindowResize"],function(require,$,Helper,Video){var OnWindowResize=require("core.plugins:OnWindowResize"),holder=$("main article .article-body"),embeds=holder.find(".embed-media.fn-video, .embed-media.fb-video"),view=Helper.getCurrentView();return new function(){var Proto=this,VideoInstance=null,INIT=!0;Proto.init=function(){embeds.each(function(){$(this).on("click",function(evt){evt.preventDefault(),($(this).hasClass("fn-video")||$(this).hasClass("fb-video"))&&Proto.render($(this))})})},Proto.render=function(elem){var target=elem.find("div.m");if(0===target.length)return!1;var caption=embeds.find(".caption"),properties={player:{autoplay:!0,flash:{vars:{user_controlled_autoplay:!0,auto_play_override:!0}}},app:{rules:["heartbeat","autoAdvance"]}};VideoInstance=Video.embed(target,properties),VideoInstance.on("amp.advance",function(data){return INIT=!1}),VideoInstance.on("amp.mediachange",function(data){if(data&&!INIT){var title=data.amp&&data.amp.title?data.amp.title:"&nbsp;",link=data.amp&&data.amp.link?data.amp.link:"#";caption.find(".title a").text(title).attr("href",link),caption.find("p").text("")}})},OnWindowResize(function(){view=Helper.getCurrentView()})}});
Modulr.define("core.pages.articles:shared/modules/video.modal",["require","jquery","helper","keymaster"],function(require,$,Helper,key){"mobile"!==Helper.getCurrentView()&&require(["core.components:modal"],function(Modal){function filter(){return!!/video\.fox(news|business)\.com\/v\/([0-9]+)\//.test($(this).attr("href")||"")}function set(items){items=items.filter(filter),0!==items.length&&items.on("click",function(evt){var videoId=getVideoId($(this)),domain=$(this).attr("href").match(/fox(news|business)/);if(key.ctrl||key.command)return window.open($(this).attr("href"),"_blank"),!1;var config={domain:domain[0]?domain[0]:"foxnews",playername:"overlay"};return videoId?(evt.preventDefault(),trigger(videoId,config),!1):void 0})}function getVideoId(el){var match=(el.attr("href")||"").match(/video\.fox(news|business)\.com\/v\/([0-9]+)\//);return match&&match[2]?match[2]:null}function trigger(videoId,config){if(!Instance){Instance=Modal.video(null)}Instance.set(videoId,config,function(VideoInstance){})}var Instance=null;!function(container){set(container.find('.content > .article a[href*="video.fox"]'))}($(".collection-clips")),function(container){set(container.find('.content > .article a[href*="video.fox"]'))}($(".collection-radar")),function(container){container.find(".content .article").each(function(){set($(this).find('.m a[href*="video.fox"], .info a[href*="video.fox"]'))})}($(".collection-trending")),function(container){set(container.find('.related.video-ct a[href*="video.fox"]'))}($(".article-content")),function(container){set(container.find('.more-on-this .content .video-ct a[href*="video.fox"]'))}($(".article-content"))})});
Modulr.define("core.pages.articles:shared/modules/video.providers",["require","jquery","helper","core.video:api"],function(require,$,Helper,Video){return new function(){var Proto=this;Proto.init=function(){var target=$(".embed-media");target.length<1||Proto.set(target)},Proto.set=function(elems){elems.each(function(evt){var el=$(this),match=(el.attr("class")||"").match(/vimeo|youtube/);!!match&&Proto.setProviders(el,match)})},Proto.setProviders=function(elem,prov){var provider=prov[0]?prov[0]:null;Video.provider(provider,elem)}}});
Modulr.define("core.pages.articles:shared/modules/viewable.video",["require","jquery","helper","lodash","core.plugins:OnWindowResize","core.video:api"],function(require,$,Helper,_){var originalView,timeout,long_title,background_ht,scroll,article=Helper.getArticleBody(),vid_container=article.find(".featured-video:first"),vid_holder=article.find("div[data-video-id]:first"),control=vid_container.find(".control"),player_container=$(".fox-video.main-player:first"),scrolled=!1,desk_dim=[612,344],OnWindowResize=require("core.plugins:OnWindowResize"),VideoEmbedAPI=require("core.video:api"),win=(VideoEmbedAPI.embed.fox,!window.FOX_pagedescriptor||window.FOX_pagedescriptor.cq,$(window));vid_holder.find(".vid-title");return!(vid_holder.length<1||"mobile"===Helper.getCurrentView()||Helper.isAEMAuthor())&&function(Instance){function play(){return PLAYER_READY=!0,VIDEO_STATUS.PAUSED=!1,vid_holder.removeClass("paused"),scrollCond(!1),VIDEO_STATUS.PAUSED}function pause(){return VIDEO_STATUS.STICKY||vid_holder.addClass("m paused"),VIDEO_STATUS.PAUSED=!0,VIDEO_STATUS.PAUSED}var Proto=this,BigtopPlayer=Instance,INITIALIZED=!1,TITLE_CHECK=!1,PLAYER_READY=!1,VIDEO_STATUS={PAUSED:!1,STICKY:!1,CLOSED:!1,HIDDEN:!1};Proto.init=function(){return!INITIALIZED&&(INITIALIZED=!0,originalView=Proto.checkView(),background_ht=Proto.getHeight(),VIDEO_STATUS.PAUSED=!1,VIDEO_STATUS.STICKY=!!vid_holder.hasClass("sticky"),long_title=vid_holder.find(".title p").text(),originalView)},Proto.checkView=function(){return Helper.getCurrentView()?"tablet":"desktop"},Proto.getHeight=function(device){return vid_container.outerHeight()},Proto.reverseAnimate=function(){return vid_container.removeClass("sticky-video sticky-right"),player_container.width(desk_dim[0]).height(desk_dim[1]),TITLE_CHECK&&vid_holder.find(".title p").html(long_title),scrolled=!1},Proto.vidTitleCheck=function(){vid_holder.find(".title p");return $.strTruncate(long_title,88,!0,"..."),TITLE_CHECK=!0},Proto.setDefaultState=function(){vid_container.attr("class","featured featured-video video-ct"),vid_container.css("height",""),vid_holder.attr("class","m video-player"),VIDEO_STATUS.STICKY=!1},Proto.scrollToPlayer=function(){$("html, body").animate({scrollTop:article.offset().top},500,"swing",function(){VIDEO_STATUS.STICKY=!1,Proto.reverseAnimate()})},Proto.collapsePlayer=function(callback){setTimeout(function(){vid_holder.addClass("slide-out")},400),Proto.setDefaultState(),"function"==typeof callback&&callback()},Proto.closeJanrainModule=function(){var janrain=$("#janrainModal"),modal=$("#janrain-share");if(!janrain.is(":visible"))return!1;modal.find("a.janrain_modal_closebutton").trigger("click")},Proto.closePlayer=function(winSize){var device=winSize||originalView;VIDEO_STATUS.STICKY&&("tablet"===device?Proto.collapsePlayer(function(){setTimeout(function(){vid_holder.addClass("m paused")},500)}):Proto.reverseAnimate()),VIDEO_STATUS.PAUSED=!0,VIDEO_STATUS.CLOSED=!0},Proto.runTransition=function(){VIDEO_STATUS.STICKY=!0,long_title&&TITLE_CHECK||(long_title=vid_holder.find(".title p").text()),"tablet"===Helper.getCurrentView()?function(){vid_container.addClass("sticky-video"),vid_holder.addClass("fade-in").delay(1e3)}():function(){vid_holder.addClass("fade-out"),vid_container.addClass("sticky-video").delay(250),vid_holder.removeClass("fade-out").addClass("fade-in").delay(300),vid_container.css("height",background_ht),scrolled=!0}(),long_title.length>162&&Proto.vidTitleCheck()},OnWindowResize(function(){var view=Proto.checkView();return view!==originalView&&(BigtopPlayer.trigger("pause"),Proto.closePlayer(originalView),VIDEO_STATUS.CLOSED=!0,VIDEO_STATUS.PAUSED=!0,originalView=view),originalView});var scrollCond=_.throttle(function(){if(VIDEO_STATUS.HIDDEN||!PLAYER_READY)return!1;if(scroll=win.scrollTop(),Proto.closeJanrainModule(),scroll<=article.offset().top)scrolled=!1,scrolled&&"desktop"===originalView?Proto.reverseAnimate():Proto.setDefaultState(),VIDEO_STATUS.STICKY=!1;else if(scroll>article.offset().top){if(scrolled)return;if(VIDEO_STATUS.PAUSED||(VIDEO_STATUS.CLOSED=!1),VIDEO_STATUS.CLOSED)return!1;VIDEO_STATUS.PAUSED=!!vid_holder.hasClass("paused"),VIDEO_STATUS.STICKY=!VIDEO_STATUS.PAUSED,Proto.runTransition()}VIDEO_STATUS.HIDDEN=!1},200);control.on("click","a.top",function(e){e.preventDefault(),Proto.scrollToPlayer()}),control.on("click","a.close",function(e){e.preventDefault(),BigtopPlayer.trigger("pause"),VIDEO_STATUS.STICKY?(clearTimeout(timeout),timeout=setTimeout(function(){Proto.closePlayer()},25)):vid_holder.addClass("m paused"),VIDEO_STATUS.CLOSED=!0}),BigtopPlayer.on("amp.ads.pause",function(){pause()}),BigtopPlayer.on("amp.ads.play",function(){play()}),BigtopPlayer.on("amp.pause",function(){pause()}),BigtopPlayer.on("amp.play",function(){play()}),BigtopPlayer.on("amp.advance",function(){return long_title=vid_holder.find(".title p").text(),TITLE_CHECK=!1}),win.bind("mousewheel DOMMouseScroll wheel touchmove scroll gesturechange",function(event){scrollCond()}),win.on("load",function(){$(window).scrollTop()>article.offset().top&&(VIDEO_STATUS.STICKY=!1,scrollCond())}),$(document).on("load",function(){$(window).scrollTop()>article.offset().top&&(VIDEO_STATUS.STICKY=!1,scrollCond())})}});
Modulr.define("core.pages.articles:sites/fbn/breaking.news",["require","jquery","lodash"],function(require,$,_){return new function(){function set(target,templatePath){require(["core.base:modules/breaking-news","core.templates:controls/api"],function(BreakingNews,Template){Template.get(templatePath,function(template){BreakingNews.loadBanner(target,{feed:target.hasClass("fn-home")?"//global.fncstatic.com/static/managed/breaking-news/fnc.js":null,template:template,normalize:function(info){return info.title=info.title.toUpperCase(),info.headline=info.headline.toUpperCase(),info.isWatchLive="livecoverage"===info.type.toLowerCase(),info},callback:function(info){target.attr("id",info.id)}})})})}this.init=function(templatePath){var target=$(".alert:first");if(0===target.length)return!1;templatePath=templatePath||"/static/orion/scripts/core/templates/app/breaking.news.html",set(target,templatePath)}}});
Modulr.define("core.pages.articles:sites/fbn/init",["require","jquery","helper"],function(require,$,Helper){var MODULE_LIST=["@shared/sample","@fbn/breaking.news"],MODULE_LAZYLOAD_LIST=[];return new function(){function execCallbacks(){for(;CALLBACK_QUEUE.length>0;){var fn=CALLBACK_QUEUE.shift();"function"==typeof fn&&fn()}}var Proto=this,INITIALIZED=!1,CALLBACK_QUEUE=[];Helper.setLoader(MODULE_LAZYLOAD_LIST),require(MODULE_LIST,function(){var args=Array.prototype.slice.call(arguments);Helper.execModules(args),INITIALIZED=!0,execCallbacks()}),Proto.ready=function(callback){INITIALIZED?callback():CALLBACK_QUEUE.push(callback)}}});
Modulr.define("core.pages.articles:sites/fnc/breaking.news",["require","jquery","lodash"],function(require,$,_){return new function(){function set(target,templatePath){require(["core.base:modules/breaking-news","core.templates:controls/api"],function(BreakingNews,Template){Template.get(templatePath,function(template){BreakingNews.loadBanner(target,{feed:target.hasClass("fn-home")?"//global.fncstatic.com/static/managed/breaking-news/fnc.js":null,template:template,normalize:function(info){return info.title=info.title.toUpperCase(),info.headline=info.headline.toUpperCase(),info.isWatchLive="livecoverage"===info.type.toLowerCase(),info},callback:function(info){target.attr("id",info.id)}})})})}this.init=function(templatePath){var target=$(".alert:first");if(0===target.length)return!1;templatePath=templatePath||"/static/orion/scripts/core/templates/app/breaking.news.html",set(target,templatePath)}}});
Modulr.define("core.pages.articles:sites/fnc/init",["require","jquery","helper"],function(require,$,Helper){var MODULE_LIST=["@shared/sample","@fnc/breaking.news","@fnc/social.sharing.buttons","@fnc/spot.im.auth0","@fnc/parallax.image","@shared/metarow",Helper.cssStickySupported()?"@fnc/sticky-rr-css":"@fnc/sticky-rr-js"],MODULE_LAZYLOAD_LIST=[];return new function(){function execCallbacks(){for(;CALLBACK_QUEUE.length>0;){var fn=CALLBACK_QUEUE.shift();"function"==typeof fn&&fn()}}var Proto=this,INITIALIZED=!1,CALLBACK_QUEUE=[];Helper.setLoader(MODULE_LAZYLOAD_LIST),require(MODULE_LIST,function(){var args=Array.prototype.slice.call(arguments);Helper.execModules(args),INITIALIZED=!0,execCallbacks()}),Proto.ready=function(callback){INITIALIZED?callback():CALLBACK_QUEUE.push(callback)}}});
Modulr.define("core.pages.articles:sites/fnc/parallax.image",["require","jquery","lodash","helper","core.plugins:OnWindowResize"],function(require,$,_,Helper){return new function(){var articlePage=$(".item-show-top"),OnWindowResize=require("core.plugins:OnWindowResize"),view=Helper.getCurrentView();if(articlePage){var bgImg=articlePage.find(".m.bg > picture > img"),logoImg=articlePage.find(".m.logo > picture > img"),talentImg=articlePage.find(".m.headshot > picture > img");if(bgImg&&logoImg&&talentImg){var setDataScroll=function(view){"desktop"===view?(talentImg.attr("data-scroll-speed","11"),logoImg.attr("data-scroll-speed","7")):"tablet"===view?(talentImg.attr("data-scroll-speed","12"),logoImg.attr("data-scroll-speed","8")):(talentImg.attr("data-scroll-speed","14"),logoImg.attr("data-scroll-speed","10"))};$.fn.moveIt=function(){var $window=$(window),instances=[];$(this).each(function(){instances.push(new moveItItem($(this)))}),window.onscroll=function(){var scrollTop=$window.scrollTop();instances.forEach(function(inst){inst.update(scrollTop)})}};var moveItItem=function(el){this.el=$(el),this.speed=parseInt(this.el.attr("data-scroll-speed"),10)};moveItItem.prototype.update=function(scrollTop){this.el.css("transform","translateY("+-scrollTop/this.speed+"px)")},$(function(){setDataScroll(view),$("[data-scroll-speed]").moveIt()}),OnWindowResize(function(){view=Helper.getCurrentView(),console.log(view),setDataScroll(view)})}}}});
Modulr.define("core.pages.articles:sites/fnc/social.sharing.buttons",["require","jquery","ISA"],function(require,$,ISA){return new function(){var Proto=this,container=$(".article-social"),url=$("link[rel=shorturl]").attr("href");Proto.init=function(){if(0!==container.length){var icons=container.find(".social-icons");!function(facebook){0!==facebook.length&&(facebook.replaceWith('<a href="#">Facebook</a>'),facebook=container.find(".fb > a"),facebook.on("click",function(evt){evt.preventDefault();var _url="//www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(url)+"&hashtag="+encodeURIComponent("#FoxNews"),popup=window.open(_url,"Fox News : Share via Facebook","height=420, width=550");window.focus&&popup.focus(),ISA.track("fb-share")}))}(icons.find(".fb > a")),function(twitter){0!==twitter.length&&(twitter.replaceWith('<a href="#">Twitter</a>'),twitter=container.find(".tw > a"),twitter.on("click",function(evt){evt.preventDefault();var _url="//twitter.com/intent/tweet?text="+encodeURIComponent($('meta[name="twitter:title"]').attr("content"))+"&url="+encodeURIComponent(url)+"&hashtags=FoxNews",popup=window.open(_url,"Fox News : Share via Twitter","height=420, width=550");window.focus&&popup.focus(),ISA.track("twttr-tweet")}))}(icons.find(".tw > a")),function(commenting){0!==commenting.length&&commenting.on("click",function(evt){evt.preventDefault();var target=$("#commenting");if(target.length>0)try{$("html, body").animate({scrollTop:target.position().top},"slow")}catch(err){console.log(err)}})}(icons.find(".comments > a")),function(email){0!==email.length&&email.on("click",function(evt){evt.preventDefault(),window.location.href="mailto:?subject="+encodeURIComponent($('meta[property="og:title"]').attr("content").trim()+" | Fox News")+"&body="+encodeURIComponent($('meta[property="og:description"]').attr("content").trim()+" | Fox News")+"%0D%0A%0D%0A"+encodeURIComponent(url),ISA.track("email-share-start")})}(icons.find(".email > a")),function(flipboard){if(0!==flipboard.length){flipboard.find("> a").attr({"data-flip-widget":"shareflip",href:"https://flipboard.com"});var s=document.createElement("script");s.async=1,s.src="https://cdn.flipboard.com/web/buttons/js/flbuttons.min.js",flipboard.get(0).appendChild(s)}}(icons.find(".flipboard"))}}}});
Modulr.define("core.pages.articles:sites/fnc/spot.im.auth0",["require","jquery","cdn","core.auth:models/middleware"],function(require,$,cdn){var Auth0=Modulr.require("core.auth:models/middleware");return new function(){var spotId="qa"===cdn.env?"sp_7D6dzO0w":"sp_ANQXRpqH",canonicalUrl=$('meta[property="og:url"]').attr("content"),liveFyre_articleId=$('meta[name="livefyreconfig"]').attr("articleId"),articleId=$('meta[name="dc.identifier"]').attr("content"),container=$("#commenting"),Proto=this,AUTH0_Props=Auth0.getProps(),AUTH0_Events=Auth0.getEvents(),asked=!1;$('meta[name="classification-isa"]').attr("content");Proto.login=function(){var startSSO=function(){AUTH0_Props&&window.SPOTIM.startSSOForProvider({provider:"auth0",token:AUTH0_Props.token})};window.SPOTIM&&window.SPOTIM.startSSOForProvider?startSSO():document.addEventListener("spot-im-api-ready",startSSO,!1)},Proto.logout=function(){var logout=function(){window.SPOTIM.logout()};window.SPOTIM&&window.SPOTIM.logout?logout():document.addEventListener("spot-im-api-ready",logout,!1)},Proto.integrateAuth0=function(){AUTH0_Props.authenticated?Proto.login():Proto.logout(),document.addEventListener("spot-im-current-user-typing-start",function(){AUTH0_Props.authenticated||asked||(asked=!0,window.confirm?confirm("You must log in to comment.")&&AUTH0_Events.startLogin():AUTH0_Events.startLogin())},!1),document.addEventListener("spot-im-user-click",function(event){"rich-editor-send-button"!==event.detail.spotImClass||AUTH0_Props.authenticated||AUTH0_Events.startLogin()})},Proto.init=function(){if(liveFyre_articleId&&container.length>0&&canonicalUrl&&articleId){container.html('<div id="commenting"></div>'),window.SPOTIM_AUTH0_ENABLED=!0;var script=document.createElement("script");script.src=window.location.protocol+"//launcher.spot.im/spot/"+spotId,script.async=!0,script.setAttribute("data-spotim-module","spotim-launcher"),script.setAttribute("data-post-url",canonicalUrl),script.setAttribute("data-post-id",articleId),script.setAttribute("data-livefyre-url",liveFyre_articleId),$("#commenting")[0].appendChild(script);var div=document.createElement("div");div.setAttribute("data-spotim-module","community-promo"),div.setAttribute("data-post-id",articleId),div.setAttribute("data-host-url",canonicalUrl),div.setAttribute("data-spot-id","sp_ANQXRpqH"),$("#commenting")[0].append(div),AUTH0_Props&&AUTH0_Events?Proto.integrateAuth0():Auth0.onLogin(function(props,events){AUTH0_Props=props,AUTH0_Events=events,Proto.integrateAuth0()})}}}});
Modulr.define("core.pages.articles:sites/fnc/spot.im",["require","jquery","cdn"],function(require,$,cdn){return new function(){var spotId="qa"===cdn.env?"sp_7D6dzO0w":"sp_ANQXRpqH",canonicalUrl=$('meta[property="og:url"]').attr("content"),liveFyre_articleId=$('meta[name="livefyreconfig"]').attr("articleId"),articleId=$('meta[name="dc.identifier"]').attr("content"),container=$("#commenting"),Proto=this;Proto.integrateJanrain=function(){function tokenChecker(){intervalId=window.setInterval(function(){var captureTokenResult=localStorage.getItem(JANRAIN_CAPTURE_TOKEN_KEY);captureToken&&captureTokenResult!==captureToken&&(onTokenChanged(captureTokenResult,captureToken),captureToken=captureTokenResult)},CHECKER_INTERVAL)}function onTokenChanged(newToken,oldToken){newToken?(console.log("Janrain user detected"),window.SPOTIM&&window.SPOTIM.getConversations&&window.SPOTIM.getConversations().length>0?window.SPOTIM.startSSOForProvider({provider:"janrain",token:newToken}):document.addEventListener("spot-im-conversation-loaded",function(){window.SPOTIM.startSSOForProvider({provider:"janrain",token:newToken})},!1)):oldToken?(console.log("Janrain user logged out"),window.SPOTIM&&window.SPOTIM.getConversations&&window.SPOTIM.getConversations().length>0?window.SPOTIM.logout({provider:"janrain",token:newToken}):document.addEventListener("spot-im-conversation-loaded",function(){window.SPOTIM.logout({provider:"janrain",token:newToken})},!1)):(console.log("No janrain user detected"),window.SPOTIM.logout({provider:"janrain",token:null}))}var intervalId=-1,CHECKER_INTERVAL=1e3,JANRAIN_CAPTURE_TOKEN_KEY="janrainCaptureToken",captureToken="";!function(){void 0!==window.localStorage&&tokenChecker(),document.addEventListener("spot-im-login-start",function(){localStorage.getItem("janrainCaptureToken")||janrain.capture.ui.modal.open()},!1)}()},Proto.init=function(){if(liveFyre_articleId&&container.length>0&&canonicalUrl&&articleId){container.html('<div id="commenting"></div>');var script=document.createElement("script");script.src=window.location.protocol+"//launcher.spot.im/spot/"+spotId,script.async=!0,script.setAttribute("data-spotim-module","spotim-launcher"),script.setAttribute("data-post-url",canonicalUrl),script.setAttribute("data-post-id",articleId),script.setAttribute("data-livefyre-url",liveFyre_articleId),$("#commenting")[0].appendChild(script),Proto.integrateJanrain()}}}});
Modulr.define("core.pages.articles:sites/fnc/sticky-rr-css",["require","jquery","lodash","helper"],function(require,$,Helper){return new function(){var Proto=this,$win=$(window),$sticky_column=$(".sticky-columns"),$sticky_region=$sticky_column.find(".sticky-region"),$sticky_container=$sticky_region.parent(".sidebar-article"),$article_meta=$(".article-meta-lower"),win_height=$win.height(),scroll=$win.scrollTop(),sticky_region_height=$sticky_region.outerHeight(),sticky_column_height=$sticky_column.outerHeight(!0)+90,top="",need_switch=!1,loaded=!1,setVendor=function(element,property,value){element.style[property]="-webkit-"+value,element.style[property]="-moz-"+value,element.style[property]="-ms-"+value,element.style[property]="-o-"+value,element.style[property]=value},scrollEvt=_.throttle(function(){scroll=$win.scrollTop(),loaded&&need_switch?(scroll>sticky_column_height+$article_meta.offset().top-win_height&&$sticky_container.css("top",top),scroll<$article_meta.offset().top&&$sticky_container.css("top",top),need_switch=!1):Proto.normalize()},500),resizeEvt=_.throttle(function(){Proto.normalize(),scrollEvt()},500);document.onreadystatechange=function(){"complete"===document.readyState&&(Proto.normalize(),loaded=!0)},Proto.normalize=function(){if(win_height=$win.height(),sticky_region_height=$sticky_region.outerHeight(),sticky_column_height=$sticky_column.outerHeight(!0)+90,sticky_region_height+100>=sticky_column_height)return!1;(top=sticky_region_height>win_height?win_height-(sticky_region_height+16)+"px":"16px")!==$sticky_container.css("top")&&(need_switch=!0)},Proto.init=function(){$win.on("scroll",scrollEvt),$win.on("resize",resizeEvt),setVendor($sticky_container[0],"position","sticky"),$sticky_container.css("top","16px"),Proto.normalize(),$("#commenting").length>0&&(document.addEventListener("spot-im-user-click",function(event){"load-more-messages"===event.detail.spotImClass&&resizeEvt()}),document.addEventListener("spot-im-frame-resize",function(){resizeEvt()}))}}});
Modulr.define("core.pages.articles:sites/fnc/sticky-rr-js",["require","jquery"],function(require,$){return new function(){var Proto=this,$win=$(window),$win_height=$win.height(),$sticky_column=$(".sticky-columns"),$sticky_region=$sticky_column.find(".sticky-region"),$article_meta=$(".article-meta-lower"),scroll=$win.scrollTop(),sticky_class="",enabled=!1,sticky=0,limit=0,scrollEvent=_.throttle(function(){if(!1===enabled)return!1;scroll=$win.scrollTop(),scroll<sticky?$sticky_region.removeClass("limit sticky-bottom sticky-top"):scroll>=sticky&&($sticky_region.addClass(sticky_class),$sticky_region.removeClass("limit")),scroll>=limit&&($sticky_region.removeClass("sticky-bottom sticky-top"),$sticky_region.addClass("limit"))},0),resizeEvent=_.throttle(function(){$win_height=$win.height(),Proto.normalize(),scrollEvent()},250);$(function(){Proto.normalize()}),document.onreadystatechange=function(){"complete"===document.readyState&&Proto.normalize()},$(window).on("load",function(event){Proto.normalize()}),Proto.normalize=function(){var sticky_region_height=$sticky_region.height(),sticky_region_height_full=$sticky_region.outerHeight(!0),sticky_region_top=$sticky_region.offset().top,sticky_column_top=$article_meta.offset().top,sticky_column_height=$sticky_column.height()+90;if(sticky_region_height_full+100>sticky_column_height)return enabled=!1,$sticky_region.removeClass("sticky-bottom sticky-top limit"),!1;sticky_region_height_full<$win_height-sticky_region_top?(sticky=sticky_column_top,limit=sticky_column_top+sticky_column_height-sticky_region_height,sticky_class="sticky-top"):(sticky=sticky_column_top-$win_height+sticky_region_height_full,limit=sticky_column_height+sticky_column_top-$win_height,sticky_class="sticky-bottom"),enabled=!0},Proto.init=function(){Proto.normalize(),$win.scroll(scrollEvent),$win.resize(resizeEvent),$win.on("mousewheel DOMMouseScroll wheel touchmove scroll gesturechange",function(event){scrollEvent()}),$("body").on("touchmove",function(event){scrollEvent()})}}});
Modulr.define("core.pages.articles:sites/router",["require","jquery","helper"],function(require,$,Helper){return new function(){function isFN(){return"function"==typeof callback}function initialized(){if(CALLBACK_QUEUE.length>0)for(;CALLBACK_QUEUE.length>0;){var callback=CALLBACK_QUEUE.shift();callback()}INITIALIZED=!0}var Proto=this,SITE_INIT=["sites",Helper.getSiteId(),"init"].join("/"),INITIALIZED=!1,REQUIRE_REQUESTED=!1,CALLBACK_QUEUE=[];Proto.ready=function(callback){INITIALIZED?isFN()&&callback():isFN()&&CALLBACK_QUEUE.push(callback),REQUIRE_REQUESTED||(REQUIRE_REQUESTED=!0,require([SITE_INIT],function(App){App.ready(function(){initialized()})}))}}});
!function(Modulr,FNC){if(Modulr.getInstance("core.pages.articles"))return!1;var config={instance:"core.pages.articles",baseDomain:FNC.CDN.domain,baseUrl:"/static/orion/scripts/core/pages/articles.new/app",masterFile:"/static/orion/scripts/core/utils/modulr/master.js",paths:{"@shared":"shared/modules","@models":"shared/models","@fnc":"sites/fnc","@fbn":"sites/fbn"},packages:["core.plugins","core.components","core.video","core.base","core.templates","core.auth"],shim:{jquery:{src:"/static/orion/scripts/core/utils/jquery/core.js",exports:"jQuery"},lodash:{src:"/static/orion/scripts/core/utils/lodash.js",exports:"_"},"akamai.time":{src:"//global.fncstatic.com/static/v/all/js/geo.js",exports:"AKAMAI_TIME_HELPER"},"akamai.geo":{src:"//global.fncstatic.com/static/v/all/js/geo.js",exports:"CONST_Akamai_GEO"},modernizr:{src:"/static/orion/scripts/core/utils/modernizr.js",exports:"Modernizr"},keymaster:{src:"/static/orion/scripts/core/utils/keymaster.js",exports:"key"}}},Instance=Modulr.config(config);Instance.define("cdn",function(){return FNC.CDN}),Instance.define("ISA",function(){return FNC.ISA}),Instance.require(["main"])}(window.Modulr,window.FNC);