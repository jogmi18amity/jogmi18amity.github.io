/*! updated; 04-10-2018 03:45 PM **/


Modulr.define("core.video:views/fox-news/listener",["require","jquery","lodash","helper","config","core.plugins:EventMessageHandler"],function(require,$,_,Helper,config){function setName(name){return Helper.setEventName("event.listener.")}var Handler=require("core.plugins:EventMessageHandler"),App=function(target,uid,type){this._UID=uid,this._target=target,this._type=type||"generic",this._Handler=new Handler,this._LISTENER_STACK=[];var self=this,messageId=setName("event.receiver.")+this._UID;this._Handler.addHandler(messageId,function(data){for(var i=0;i<self._LISTENER_STACK.length;i++)self._LISTENER_STACK[i](data)})};App.prototype.listen=function(callback){if("function"==typeof callback){setName("event.receiver."),this._UID;this._LISTENER_STACK.push(callback)}},App.prototype.send=function(name,data){if(name){var obj={uid:"uid-embed-"+this._UID,name:name,data:void 0===data?null:data},messageId=setName("event.sender.")+this._UID,target="parent"===this._target?"parent":this._target.find("> iframe:first").get(0);this._Handler.sendMessage(target,messageId,obj)}};var API=function(){this._EVENTS_STACK={}};return API.prototype.create=function(target,uid,type){return uid&&target?(type=type||null,this._EVENTS_STACK[uid]||(this._EVENTS_STACK[uid]=new App(target,uid,type)),this._EVENTS_STACK[uid]):null},API.prototype.get=function(uid){return this._EVENTS_STACK[uid]||null},new API});