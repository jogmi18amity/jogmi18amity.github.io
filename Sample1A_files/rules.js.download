/*! updated; 04-10-2018 03:45 PM **/


Modulr.define("core.video:views/fox-news/rules",["require","jquery","lodash","helper","config"],function(require,$,_,Helper,config){var App=function(){};App.prototype.autoplay=function(opts){_.merge(opts.player,{autoplay:!0,usersettings:{enabled:!1},flash:{vars:{user_controlled_autoplay:!0,auto_play_override:!0}}})},App.prototype.autostart=function(opts){_.merge(opts.player,{autoplay:!0,flash:{vars:{user_controlled_autoplay:!0,auto_play_override:!0}}})},App.prototype.noAutoplay=function(opts,props){_.merge(opts.player,{autoplay:!1,usersettings:{enabled:!1},flash:{vars:{user_controlled_autoplay:!0}}})},App.prototype.noAds=function(opts,props){_.merge(opts.player,{ima:{enabled:!1},flash:{vars:{core_ads_enabled:!1}}})},App.prototype.noTracking=function(opts,props){_.merge(opts.player,{nielsen:{enabled:!1},chartbeatanalytics:{enabled:!1},chartbeat:{enabled:!1},comscore:{enabled:!1},comscorestreamsense:{enabled:!1},omniture:{enabled:!1,useJS:!1,heartbeat:{enabled:!1}}})},App.prototype.playername=function(opts,props){var name=props||opts.player.name||"inpage";_.merge(opts.player,{name:name,params:{playerName:name},mediaanalytics:{fields:{pageName:{type:"value",value:name}}},flash:{vars:{core_player_name:name,core_ad_player_name:name,core_omniture_player_name:name}}})},App.prototype.moat=function(opts,props){(!opts.app.rules||(!opts.app.rules||!/(noAds|noTracking)/.test(opts.app.rules.join("|"))))&&_.merge(opts.player,{moat:{data:{partnerCode:"foxima87313513"}}})},App.prototype.embedUrl=function(opts,props){if(!opts.player.params.parentEmbedUrl)try{if(window.location!==window.parent.location){var url=document.referrer;_.merge(opts.player,{params:{parentEmbedUrl:url}})}}catch(err){}},App.prototype.noHls=function(opts,props){_.merge(opts.player,{hls:{enabled:!1}})},App.prototype.noHlsCredentials=function(opts,props){_.merge(opts.player,{hls:{withCredentials:!1}})},App.prototype.heartbeat=function(opts,props){_.merge(opts.player,{omniture:{useJS:!1,heartbeat:{enabled:!0,liveLinear:{enabled:!0}}}})},App.prototype.noHeartbeat=function(opts,props){_.merge(opts.player,{omniture:{useJS:!1,heartbeat:{enabled:!1}}})},App.prototype.fncRadio=function(opts,props){_.merge(opts.app,{domain:"foxnews",ampConfig:{site:config.akamai.configParam.site.radio}}),_.merge(opts.player,{hls:{withCredentials:!1},omniture:{useJS:!1,heartbeat:{enabled:!0,liveLinear:{enabled:!0}}}})},App.prototype.foxnews=function(opts,props){_.merge(opts.app,{domain:"foxnews",ampConfig:{site:config.akamai.configParam.site.foxnews}})},App.prototype.foxbusiness=function(opts,props){_.merge(opts.app,{domain:"foxbusiness",ampConfig:{site:config.akamai.configParam.site.foxbusiness}})},App.prototype.fncInsider=function(opts,props){_.merge(opts.app,{domain:"video.insider",ampConfig:{site:config.akamai.configParam.site.insider}})},App.prototype.fncNation=function(opts,props){_.merge(opts.app,{domain:"foxnews",ampConfig:{site:config.akamai.configParam.site.nation}})},App.prototype.fbnLive=function(opts,props){_.merge(opts.app,{domain:"foxbusiness",ampConfig:{site:config.akamai.configParam.site["live.foxbusiness"]}})},App.prototype.noShare=function(opts,props){_.merge(opts.player,{sharepanel:{enabled:!1},flash:{vars:{share_mode:"2",show_sharing_overlay:"false",show_email_overlay:"false"}}})},App.prototype.setAIS=function(opts,props){var platformID=config.ais.platformId,prefix=props&&props.prefix?props.prefix:null,resourceID=function(){var res;return opts.app.tve?res=opts.app.videoId===config.tve.foxbusiness.videoId?config.tve.foxbusiness.resourceID:config.tve.foxnews.resourceID:opts.app.auth&&(res=(opts.app.auth.domain?config.authenticated[opts.app.auth.domain]:config.authenticated.foxnews).resourceID),res}();_.merge(opts.player,{aisPrefix:"video",ais:{platformID:platformID,resourceID:resourceID,contentID:"#{media.guid}",responseTargets:Helper.setResponseTarget(resourceID,prefix),logos:{base:window.location.protocol+"//global.fncstatic.com/static/p/watch/img/logo/chooser/",group:"top_providers",key:"filename"}},flash:{vars:{core_omniture_account:"foxnewsmaven"}}}),opts.player.omniture||_.merge(opts.player,{omniture:{useJS:!1,heartbeat:{enabled:!0,liveLinear:{enabled:!0}}}}),props&&props.redir&&this.authRedir(opts,props.redir),this.noShare(opts)},App.prototype.authRedir=function(opts,props){"string"==typeof props&&_.merge(opts.player,{ais:{redir:props}})},App.prototype.noTitleBar=function(opts,props){_.merge(opts.player,{titlebar:{enabled:!1}})},App.prototype.noKrux=function(opts,props){_.merge(opts.player,{plugins:{krux:{enabled:!1}}})},App.prototype.autoAdvance=function(opts,props){_.merge(opts.player,{autoadvance:{enabled:!0}})};var rules=new App;return function(){var API=function(){};return API.prototype.set=function(id,opts,props){rules[id]&&rules[id](opts,props)},API.prototype.setApp=function(opts){if($.isArray(opts.app.rules))for(var i=0;i<opts.app.rules.length;i++){var item=opts.app.rules[i],index=item.indexOf(":"),id=item,props=null;index>-1&&(id=item.slice(0,index),props=item.slice(index+1)),rules[id]&&rules[id](opts,props)}},new API}()});