/*! updated; 04-10-2018 03:45 PM **/


Modulr.define("core.plugins:URLInfo",[],function(){function buildUrl(info){var url=info.path,query=joinPair(info.query),hash=joinPair(info.hash);return url+(query?"?"+query:"")+(hash?"#"+hash:"")}function joinPair(pair){var arr=[];for(var i in pair){var val=pair[i];val?arr.push([i,encodeURIComponent(val)].join("=")):arr.push(i)}return arr?arr.join("&"):""}function getInfo(url){var sp=url.split("?"),path=sp[0],query=sp[1]||"",hash="";if(query.length>0){var hs=query.split("#");hash=trim(hs[1]||""),hash.length>0&&(query=hs[0])}else{var ps=path.split("#");hash=trim(ps[1]||""),hash.length>0&&(path=ps[0])}return{path:path,query:itemize(query),hash:itemize(hash)}}function itemize(info){for(var si=info.split("&"),obj={},i=0;i<si.length;i++){if(si[i].length>0){var s=si[i].split("=");obj[s[0]]=s[1]||""}}return obj}function trim(str){return str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}return function(URL){var Proto=this,INFO=getInfo(URL);Proto.addQuery=function(pair,returnUrl){for(var i in pair)INFO.query[i]=pair[i];var ret=INFO;return returnUrl&&(ret=buildUrl(INFO)),ret},Proto.addHash=function(pair,returnUrl){for(var i in pair)INFO.hash[i]=pair[i];var ret=INFO;return returnUrl&&(ret=buildUrl(INFO)),ret},Proto.getUrl=function(){return buildUrl(INFO)},Proto.getInfo=function(){return INFO}}});